{# templates/reservations/confirm.html.twig #}
{% extends 'base.html.twig' %}
{% block title %}Potwierdzenie rezerwacji{% endblock %}

{% block body %}
    <div class="row justify-content-center">
        <div class="col-lg-7">
            <div class="card p-4">
                <h3 class="mb-3">Potwierdź rezerwację</h3>

                <div class="mb-3">
                    <div class="fw-bold">{{ car.brand }} {{ car.model }}</div>
                    <div class="text-muted small">Rej: {{ car.registrationNumber }}</div>
                </div>

                <div class="row g-3">
                    <div class="col-md-4"><div class="border rounded p-3"><div class="text-muted small">Start</div><div class="fs-5">{{ start|date('Y-m-d') }}</div></div></div>
                    <div class="col-md-4"><div class="border rounded p-3"><div class="text-muted small">Koniec</div><div class="fs-5">{{ end|date('Y-m-d') }}</div></div></div>
                    <div class="col-md-4"><div class="border rounded p-3"><div class="text-muted small">Liczba dni</div><div class="fs-5">{{ days }}</div></div></div>
                </div>

                <div class="border rounded p-3 mt-3 bg-light">
                    <div class="d-flex justify-content-between">
                        <div>Stawka za dobę</div>
                        <div>{{ pricePerDay|number_format(2, '.', ' ') }} zł</div>
                    </div>
                    <hr class="my-2">
                    <div class="d-flex justify-content-between fw-bold">
                        <div>Łącznie</div>
                        <div>{{ total|number_format(2, '.', ' ') }} zł</div>
                    </div>
                </div>

                <form class="mt-4" method="post" action="{{ path('app_reservation_store', {'id': car.id}) }}">
                    <input type="hidden" name="_token" value="{{ csrf }}">
                    <input type="hidden" name="start" value="{{ start|date('Y-m-d') }}">
                    <input type="hidden" name="end"   value="{{ end|date('Y-m-d') }}">

                    <div class="form-check my-2">
                        <input class="form-check-input" type="checkbox" id="agree" required>
                        <label class="form-check-label" for="agree">
                            Akceptuję regulamin najmu i potwierdzam dane rezerwacji.
                        </label>
                    </div>

                    <div class="d-flex gap-2 mt-3">
                        <a href="{{ path('app_car_details', {'id': car.id}) }}" class="btn btn-outline-secondary">Wróć</a>
                        <button type="submit" class="btn btn-primary">Potwierdź i złóż rezerwację</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
