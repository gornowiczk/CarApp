{% extends 'base.html.twig' %}

{% block title %}SzczegÃ³Å‚y rezerwacji{% endblock %}

{% block body %}
    <div class="container mt-4">
        <div class="card shadow p-4">
            <h1 class="text-center">ğŸ“‹ SzczegÃ³Å‚y rezerwacji</h1>
            <hr>

            <p><strong>ğŸš— SamochÃ³d:</strong> {{ reservation.car.brand }} {{ reservation.car.model }}</p>
            <p><strong>ğŸ‘¤ Najemca:</strong> {{ reservation.user.email }}</p>
            <p><strong>ğŸ“… Data rozpoczÄ™cia:</strong> {{ reservation.startDate|date('Y-m-d') }}</p>
            <p><strong>ğŸ“… Data zakoÅ„czenia:</strong> {{ reservation.endDate|date('Y-m-d') }}</p>

            {% if reservation.phoneNumber %}
                <p><strong>ğŸ“ Numer telefonu:</strong> {{ reservation.phoneNumber }}</p>
            {% endif %}

            {% if reservation.rentalLocation %}
                <p><strong>ğŸ“ Preferowana lokalizacja wynajmu:</strong> {{ reservation.rentalLocation }}</p>
            {% endif %}

            {% if reservation.comments %}
                <p><strong>ğŸ“ Komentarz:</strong> {{ reservation.comments }}</p>
            {% endif %}

            <p><strong>ğŸ“Œ Status:</strong>
                {% if reservation.status == 'pending' %}
                    <span class="badge bg-warning">â³ Oczekuje</span>
                {% elseif reservation.status == 'accepted' %}
                    <span class="badge bg-success">âœ… Zaakceptowana</span>
                {% else %}
                    <span class="badge bg-danger">âŒ Odrzucona</span>
                {% endif %}
            </p>

            <!-- Przyciski pobierania faktury i umowy -->
            <div class="mt-3">
                <a href="{{ path('app_generate_contract', {'id': reservation.id}) }}" class="btn btn-primary">
                    ğŸ“œ Pobierz fakturÄ™
                </a>
                <a href="{{ path('app_generate_rental_agreement', {'id': reservation.id}) }}" class="btn btn-secondary">
                    ğŸ“„ Pobierz umowÄ™ najmu
                </a>
            </div>

            <!-- Opcje akceptacji/odrzucenia rezerwacji -->
            {% if reservation.car.owner == app.user %}
                <div class="mt-4">
                    {% if reservation.status == 'pending' %}
                        <form method="post" action="{{ path('app_accept_reservation', {'id': reservation.id}) }}" style="display:inline;">
                            <button class="btn btn-success">âœ” Akceptuj</button>
                        </form>
                        <form method="post" action="{{ path('app_reject_reservation', {'id': reservation.id}) }}" style="display:inline;">
                            <button class="btn btn-danger">âœ– OdrzuÄ‡</button>
                        </form>
                    {% endif %}
                </div>
            {% endif %}

            <a href="{{ path('app_reservations') }}" class="btn btn-secondary">PowrÃ³t</a>


        </div>
    </div>
{% endblock %}
